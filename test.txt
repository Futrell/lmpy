from smoothing import *
from lm import LanguageModel
l = LanguageModel(order=2)
l.addText("The unpurged images of day recede;")
l.addText("The Emperor's drunken soldiery are abed;")
l.addText("Night resonance recedes, night-walkers' song")
l.addText("After great cathedral gong;")
l.addText("A starlit or a moonlit dome disdains")
l.addText("All that man is,")
l.addText("All mere complexities,")
l.addText("The fury and the mire of human veins.")
l.addText("Before me floats an image, man or shade,")
l.addText("Shade more than man, more image than a shade;")
l.addText("For Hades' bobbin bound in mummy-cloth")
l.addText("May unwind the winding path;")
l.addText("A mouth that has no moisture and no breath")
l.addText("Breathless mouths may summon;")
l.addText("I hail the superhuman;")
l.addText("I call it death-in-life and life-in-death.")
l.addText("Miracle, bird or golden handiwork,")
l.addText("More miracle than bird or handiwork,")
l.addText("Planted on the starlit golden bough,")
l.addText("Can like the cocks of Hades crow,")
l.addText("Or, by the moon embittered, scorn aloud")
l.addText("In glory of changeless metal")
l.addText("Common bird or petal")
l.addText("And all complexities of mire or blood.")
l.addText("At midnight on the Emperor's pavement flit")
l.addText("Flames that no faggot feeds, nor steel has lit,")
l.addText("Nor storm disturbs, flames begotten of flame,")
l.addText("Where blood-begotten spirits come")
l.addText("And all complexities of fury leave,")
l.addText("Dying into a dance,")
l.addText("An agony of trance,")
l.addText("An agony of flame that cannot singe a sleeve.")
l.addText("Astraddle on the dolphin's mire and blood,")
l.addText("Spirit after spirit! The smithies break the flood,")
l.addText("The golden smithies of the Emperor!")
l.addText("Marbles of the dancing floor")
l.addText("Break bitter furies of complexity,")
l.addText("Those images that yet")
l.addText("Fresh images beget,")
l.addText("That dolphin-torn, that gong-tormented sea.")
l.addText("That is no country for old men. The young")
l.addText("In one another's arms, birds in the trees")
l.addText("— Those dying generations — at their song,")
l.addText("The salmon-falls, the mackerel-crowded seas,")
l.addText("Fish, flesh, or fowl, commend all summer long")
l.addText("Whatever is begotten, born, and dies.")
l.addText("Caught in that sensual music all neglect")
l.addText("Monuments of unageing intellect.")
l.addText("An aged man is but a paltry thing,")
l.addText("A tattered coat upon a stick, unless")
l.addText("Soul clap its hands and sing, and louder sing")
l.addText("For every tatter in its mortal dress,")
l.addText("Nor is there singing school but studying")
l.addText("Monuments of its own magnificence;")
l.addText("And therefore I have sailed the seas and come")
l.addText("To the holy city of Byzantium.")
l.addText("O sages standing in God's holy fire")
l.addText("As in the gold mosaic of a wall,")
l.addText("Come from the holy fire, perne in a gyre,")
l.addText("And be the singing-masters of my soul.")
l.addText("Consume my heart away; sick with desire")
l.addText("And fastened to a dying animal")
l.addText("It knows not what it is; and gather me")
l.addText("Into the artifice of eternity.")
l.addText("Once out of nature I shall never take")
l.addText(" bodily form from any natural thing,")
l.addText("But such a form as Grecian goldsmiths make")
l.addText("Of hammered gold and gold enameling")
l.addText("To keep a drowsy Emperor awake;")
l.addText("Or set upon a golden bough to sing")
l.addText("To lords and ladies of Byzantium")
l.addText("Of what is past, or passing, or to come.")
from similarity import DistribSim
from weighting import *
import cPickle
ds = DistribSim(l.getVocab(),cPickle.load(open('ctx')),pos(ttest))
l.generate(smoothing=SimilaritySmoothing(sim=ds))
